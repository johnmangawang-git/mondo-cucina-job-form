var ze=Object.defineProperty,Be=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var je=(a,n,s)=>n in a?ze(a,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[n]=s,I=(a,n)=>{for(var s in n||(n={}))ye.call(n,s)&&je(a,s,n[s]);if(ae)for(var s of ae(n))Ne.call(n,s)&&je(a,s,n[s]);return a},$=(a,n)=>Be(a,We(n));var we=(a,n)=>{var s={};for(var t in a)ye.call(a,t)&&n.indexOf(t)<0&&(s[t]=a[t]);if(a!=null&&ae)for(var t of ae(a))n.indexOf(t)<0&&Ne.call(a,t)&&(s[t]=a[t]);return s};var Je=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports);var T=(a,n,s)=>new Promise((t,r)=>{var o=u=>{try{c(s.next(u))}catch(d){r(d)}},i=u=>{try{c(s.throw(u))}catch(d){r(d)}},c=u=>u.done?t(u.value):Promise.resolve(u.value).then(o,i);c((s=s.apply(a,n)).next())});import{r as f,a as Ue,g as qe,c as Pe,b as Ye,u as Z,d as fe,B as Ze,R as Ge,e as K,N as Ve,f as He}from"./chunk.31004e46.js";import{o as Xe}from"./chunk.d5b957c3.js";import{c as Ke}from"./chunk.9b27d5d6.js";var Mt=Je(A=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();var Ee={exports:{}},re={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qe=f,et=Symbol.for("react.element"),tt=Symbol.for("react.fragment"),st=Object.prototype.hasOwnProperty,at=Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nt={key:!0,ref:!0,__self:!0,__source:!0};function Oe(a,n,s){var t,r={},o=null,i=null;s!==void 0&&(o=""+s),n.key!==void 0&&(o=""+n.key),n.ref!==void 0&&(i=n.ref);for(t in n)st.call(n,t)&&!nt.hasOwnProperty(t)&&(r[t]=n[t]);if(a&&a.defaultProps)for(t in n=a.defaultProps,n)r[t]===void 0&&(r[t]=n[t]);return{$$typeof:et,type:a,key:o,ref:i,props:r,_owner:at.current}}re.Fragment=tt;re.jsx=Oe;re.jsxs=Oe;Ee.exports=re;var e=Ee.exports,ge={},_e=Ue;ge.createRoot=_e.createRoot,ge.hydrateRoot=_e.hydrateRoot;const B=({title:a,children:n,className:s=""})=>e.jsxs("div",{className:`card mb-4 ${s}`,children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"bi bi-list-ul me-2 text-primary"}),a]})}),e.jsx("div",{className:"card-body",children:n})]});var Fe={exports:{}},ce={exports:{}},de,Ce;function rt(){if(Ce)return de;Ce=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return de=a,de}var ue,Se;function it(){if(Se)return ue;Se=1;var a=rt();function n(){}function s(){}return s.resetWarningCache=n,ue=function(){function t(i,c,u,d,m,h){if(h!==a){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function r(){return t}var o={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:s,resetWarningCache:n};return o.PropTypes=o,o},ue}var De;function ot(){return De||(De=1,ce.exports=it()()),ce.exports}/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function U(a,n,s){this.x=a,this.y=n,this.time=s||new Date().getTime()}U.prototype.velocityFrom=function(a){return this.time!==a.time?this.distanceTo(a)/(this.time-a.time):1};U.prototype.distanceTo=function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))};U.prototype.equals=function(a){return this.x===a.x&&this.y===a.y&&this.time===a.time};function xe(a,n,s,t){this.startPoint=a,this.control1=n,this.control2=s,this.endPoint=t}xe.prototype.length=function(){for(var a=10,n=0,s=void 0,t=void 0,r=0;r<=a;r+=1){var o=r/a,i=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){var u=i-s,d=c-t;n+=Math.sqrt(u*u+d*d)}s=i,t=c}return n};xe.prototype._point=function(a,n,s,t,r){return n*(1-a)*(1-a)*(1-a)+3*s*(1-a)*(1-a)*a+3*t*(1-a)*a*a+r*a*a*a};function lt(a,n,s){var t,r,o,i=null,c=0;s||(s={});var u=function(){c=s.leading===!1?0:Date.now(),i=null,o=a.apply(t,r),i||(t=r=null)};return function(){var d=Date.now();!c&&s.leading===!1&&(c=d);var m=n-(d-c);return t=this,r=arguments,m<=0||m>n?(i&&(clearTimeout(i),i=null),c=d,o=a.apply(t,r),i||(t=r=null)):!i&&s.trailing!==!1&&(i=setTimeout(u,m)),o}}function S(a,n){var s=this,t=n||{};this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.throttle?this._strokeMoveUpdate=lt(S.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=S.prototype._strokeUpdate,this.dotSize=t.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.onBegin=t.onBegin,this.onEnd=t.onEnd,this._canvas=a,this._ctx=a.getContext("2d"),this.clear(),this._handleMouseDown=function(r){r.which===1&&(s._mouseButtonDown=!0,s._strokeBegin(r))},this._handleMouseMove=function(r){s._mouseButtonDown&&s._strokeMoveUpdate(r)},this._handleMouseUp=function(r){r.which===1&&s._mouseButtonDown&&(s._mouseButtonDown=!1,s._strokeEnd(r))},this._handleTouchStart=function(r){if(r.targetTouches.length===1){var o=r.changedTouches[0];s._strokeBegin(o)}},this._handleTouchMove=function(r){r.preventDefault();var o=r.targetTouches[0];s._strokeMoveUpdate(o)},this._handleTouchEnd=function(r){var o=r.target===s._canvas;o&&(r.preventDefault(),s._strokeEnd(r))},this.on()}S.prototype.clear=function(){var a=this._ctx,n=this._canvas;a.fillStyle=this.backgroundColor,a.clearRect(0,0,n.width,n.height),a.fillRect(0,0,n.width,n.height),this._data=[],this._reset(),this._isEmpty=!0};S.prototype.fromDataURL=function(a){var n=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=new Image,r=s.ratio||window.devicePixelRatio||1,o=s.width||this._canvas.width/r,i=s.height||this._canvas.height/r;this._reset(),t.src=a,t.onload=function(){n._ctx.drawImage(t,0,0,o,i)},this._isEmpty=!1};S.prototype.toDataURL=function(a){var n;switch(a){case"image/svg+xml":return this._toSVG();default:for(var s=arguments.length,t=Array(s>1?s-1:0),r=1;r<s;r++)t[r-1]=arguments[r];return(n=this._canvas).toDataURL.apply(n,[a].concat(t))}};S.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};S.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};S.prototype.isEmpty=function(){return this._isEmpty};S.prototype._strokeBegin=function(a){this._data.push([]),this._reset(),this._strokeUpdate(a),typeof this.onBegin=="function"&&this.onBegin(a)};S.prototype._strokeUpdate=function(a){var n=a.clientX,s=a.clientY,t=this._createPoint(n,s),r=this._data[this._data.length-1],o=r&&r[r.length-1],i=o&&t.distanceTo(o)<this.minDistance;if(!(o&&i)){var c=this._addPoint(t),u=c.curve,d=c.widths;u&&d&&this._drawCurve(u,d.start,d.end),this._data[this._data.length-1].push({x:t.x,y:t.y,time:t.time,color:this.penColor})}};S.prototype._strokeEnd=function(a){var n=this.points.length>2,s=this.points[0];if(!n&&s&&this._drawDot(s),s){var t=this._data[this._data.length-1],r=t[t.length-1];s.equals(r)||t.push({x:s.x,y:s.y,time:s.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(a)};S.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};S.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};S.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};S.prototype._createPoint=function(a,n,s){var t=this._canvas.getBoundingClientRect();return new U(a-t.left,n-t.top,s||new Date().getTime())};S.prototype._addPoint=function(a){var n=this.points,s=void 0;if(n.push(a),n.length>2){n.length===3&&n.unshift(n[0]),s=this._calculateCurveControlPoints(n[0],n[1],n[2]);var t=s.c2;s=this._calculateCurveControlPoints(n[1],n[2],n[3]);var r=s.c1,o=new xe(n[1],t,r,n[2]),i=this._calculateCurveWidths(o);return n.shift(),{curve:o,widths:i}}return{}};S.prototype._calculateCurveControlPoints=function(a,n,s){var t=a.x-n.x,r=a.y-n.y,o=n.x-s.x,i=n.y-s.y,c={x:(a.x+n.x)/2,y:(a.y+n.y)/2},u={x:(n.x+s.x)/2,y:(n.y+s.y)/2},d=Math.sqrt(t*t+r*r),m=Math.sqrt(o*o+i*i),h=c.x-u.x,l=c.y-u.y,g=m/(d+m),x={x:u.x+h*g,y:u.y+l*g},N=n.x-x.x,D=n.y-x.y;return{c1:new U(c.x+N,c.y+D),c2:new U(u.x+N,u.y+D)}};S.prototype._calculateCurveWidths=function(a){var n=a.startPoint,s=a.endPoint,t={start:null,end:null},r=this.velocityFilterWeight*s.velocityFrom(n)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(r);return t.start=this._lastWidth,t.end=o,this._lastVelocity=r,this._lastWidth=o,t};S.prototype._strokeWidth=function(a){return Math.max(this.maxWidth/(a+1),this.minWidth)};S.prototype._drawPoint=function(a,n,s){var t=this._ctx;t.moveTo(a,n),t.arc(a,n,s,0,2*Math.PI,!1),this._isEmpty=!1};S.prototype._drawCurve=function(a,n,s){var t=this._ctx,r=s-n,o=Math.floor(a.length());t.beginPath();for(var i=0;i<o;i+=1){var c=i/o,u=c*c,d=u*c,m=1-c,h=m*m,l=h*m,g=l*a.startPoint.x;g+=3*h*c*a.control1.x,g+=3*m*u*a.control2.x,g+=d*a.endPoint.x;var x=l*a.startPoint.y;x+=3*h*c*a.control1.y,x+=3*m*u*a.control2.y,x+=d*a.endPoint.y;var N=n+d*r;this._drawPoint(g,x,N)}t.closePath(),t.fill()};S.prototype._drawDot=function(a){var n=this._ctx,s=typeof this.dotSize=="function"?this.dotSize():this.dotSize;n.beginPath(),this._drawPoint(a.x,a.y,s),n.closePath(),n.fill()};S.prototype._fromData=function(a,n,s){for(var t=0;t<a.length;t+=1){var r=a[t];if(r.length>1)for(var o=0;o<r.length;o+=1){var i=r[o],c=new U(i.x,i.y,i.time),u=i.color;if(o===0)this.penColor=u,this._reset(),this._addPoint(c);else if(o!==r.length-1){var d=this._addPoint(c),m=d.curve,h=d.widths;m&&h&&n(m,h,u)}}else{this._reset();var l=r[0];s(l)}}};S.prototype._toSVG=function(){var a=this,n=this._data,s=this._canvas,t=Math.max(window.devicePixelRatio||1,1),r=0,o=0,i=s.width/t,c=s.height/t,u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttributeNS(null,"width",s.width),u.setAttributeNS(null,"height",s.height),this._fromData(n,function(v,O,R){var M=document.createElement("path");if(!isNaN(v.control1.x)&&!isNaN(v.control1.y)&&!isNaN(v.control2.x)&&!isNaN(v.control2.y)){var W="M "+v.startPoint.x.toFixed(3)+","+v.startPoint.y.toFixed(3)+" "+("C "+v.control1.x.toFixed(3)+","+v.control1.y.toFixed(3)+" ")+(v.control2.x.toFixed(3)+","+v.control2.y.toFixed(3)+" ")+(v.endPoint.x.toFixed(3)+","+v.endPoint.y.toFixed(3));M.setAttribute("d",W),M.setAttribute("stroke-width",(O.end*2.25).toFixed(3)),M.setAttribute("stroke",R),M.setAttribute("fill","none"),M.setAttribute("stroke-linecap","round"),u.appendChild(M)}},function(v){var O=document.createElement("circle"),R=typeof a.dotSize=="function"?a.dotSize():a.dotSize;O.setAttribute("r",R),O.setAttribute("cx",v.x),O.setAttribute("cy",v.y),O.setAttribute("fill",v.color),u.appendChild(O)});var d="data:image/svg+xml;base64,",m='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+r+" "+o+" "+i+" "+c+'"')+(' width="'+i+'"')+(' height="'+c+'"')+">",h=u.innerHTML;if(h===void 0){var l=document.createElement("dummy"),g=u.childNodes;l.innerHTML="";for(var x=0;x<g.length;x+=1)l.appendChild(g[x].cloneNode(!0));h=l.innerHTML}var N="</svg>",D=m+h+N;return d+btoa(D)};S.prototype.fromData=function(a){var n=this;this.clear(),this._fromData(a,function(s,t){return n._drawCurve(s,t.start,t.end)},function(s){return n._drawDot(s)}),this._data=a};S.prototype.toData=function(){return this._data};const ct=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"})),dt=qe(ct);var me={exports:{}},ke;function ut(){return ke||(ke=1,function(a,n){(function(s,t){a.exports=t()})(Pe,function(){return function(s){function t(o){if(r[o])return r[o].exports;var i=r[o]={exports:{},id:o,loaded:!1};return s[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=s,t.c=r,t.p="",t(0)}([function(s,t){function r(d){var m=d.getContext("2d"),h=d.width,l=d.height,g=m.getImageData(0,0,h,l).data,x=c(!0,h,l,g),N=c(!1,h,l,g),D=u(!0,h,l,g),v=u(!1,h,l,g),O=v-D+1,R=N-x+1,M=m.getImageData(D,x,O,R);return d.width=O,d.height=R,m.clearRect(0,0,O,R),m.putImageData(M,0,0),d}function o(d,m,h,l){return{red:l[4*(h*m+d)],green:l[4*(h*m+d)+1],blue:l[4*(h*m+d)+2],alpha:l[4*(h*m+d)+3]}}function i(d,m,h,l){return o(d,m,h,l).alpha}function c(d,m,h,l){for(var g=d?1:-1,x=d?0:h-1,N=x;d?N<h:N>-1;N+=g)for(var D=0;D<m;D++)if(i(D,N,m,l))return N;return null}function u(d,m,h,l){for(var g=d?1:-1,x=d?0:m-1,N=x;d?N<m:N>-1;N+=g)for(var D=0;D<h;D++)if(i(N,D,m,l))return N;return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}])})}(me)),me.exports}(function(a,n){(function(s,t){a.exports=t(ot(),f,dt,ut())})(Pe,function(s,t,r,o){return function(i){function c(d){if(u[d])return u[d].exports;var m=u[d]={exports:{},id:d,loaded:!1};return i[d].call(m.exports,m,m.exports,c),m.loaded=!0,m.exports}var u={};return c.m=i,c.c=u,c.p="",c(0)}([function(i,c,u){function d(w){return w&&w.__esModule?w:{default:w}}function m(w,y){var F={};for(var P in w)y.indexOf(P)>=0||Object.prototype.hasOwnProperty.call(w,P)&&(F[P]=w[P]);return F}function h(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function l(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||typeof y!="object"&&typeof y!="function"?w:y}function g(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}Object.defineProperty(c,"__esModule",{value:!0});var x=Object.assign||function(w){for(var y=1;y<arguments.length;y++){var F=arguments[y];for(var P in F)Object.prototype.hasOwnProperty.call(F,P)&&(w[P]=F[P])}return w},N=function(){function w(y,F){for(var P=0;P<F.length;P++){var b=F[P];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,F,P){return F&&w(y.prototype,F),P&&w(y,P),y}}(),D=u(1),v=d(D),O=u(2),R=d(O),M=u(3),W=d(M),G=u(4),V=d(G),J=function(w){function y(){var F,P,b,H;h(this,y);for(var X=arguments.length,te=Array(X),p=0;p<X;p++)te[p]=arguments[p];return P=b=l(this,(F=y.__proto__||Object.getPrototypeOf(y)).call.apply(F,[this].concat(te))),b._sigPad=null,b._excludeOurProps=function(){var j=b.props,_=(j.canvasProps,j.clearOnResize,m(j,["canvasProps","clearOnResize"]));return _},b.getCanvas=function(){return b._canvas},b.getTrimmedCanvas=function(){var j=document.createElement("canvas");return j.width=b._canvas.width,j.height=b._canvas.height,j.getContext("2d").drawImage(b._canvas,0,0),(0,V.default)(j)},b.getSignaturePad=function(){return b._sigPad},b._checkClearOnResize=function(){b.props.clearOnResize&&b._resizeCanvas()},b._resizeCanvas=function(){var j=b.props.canvasProps||{},_=j.width,E=j.height;if(!_||!E){var C=b._canvas,L=Math.max(window.devicePixelRatio||1,1);_||(C.width=C.offsetWidth*L),E||(C.height=C.offsetHeight*L),C.getContext("2d").scale(L,L),b.clear()}},b.on=function(){return window.addEventListener("resize",b._checkClearOnResize),b._sigPad.on()},b.off=function(){return window.removeEventListener("resize",b._checkClearOnResize),b._sigPad.off()},b.clear=function(){return b._sigPad.clear()},b.isEmpty=function(){return b._sigPad.isEmpty()},b.fromDataURL=function(j,_){return b._sigPad.fromDataURL(j,_)},b.toDataURL=function(j,_){return b._sigPad.toDataURL(j,_)},b.fromData=function(j){return b._sigPad.fromData(j)},b.toData=function(){return b._sigPad.toData()},H=P,l(b,H)}return g(y,w),N(y,[{key:"componentDidMount",value:function(){this._sigPad=new W.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var F=this,P=this.props.canvasProps;return R.default.createElement("canvas",x({ref:function(b){F._canvas=b}},P))}}]),y}(O.Component);J.propTypes={velocityFilterWeight:v.default.number,minWidth:v.default.number,maxWidth:v.default.number,minDistance:v.default.number,dotSize:v.default.oneOfType([v.default.number,v.default.func]),penColor:v.default.string,throttle:v.default.number,onEnd:v.default.func,onBegin:v.default.func,canvasProps:v.default.object,clearOnResize:v.default.bool},J.defaultProps={clearOnResize:!0},c.default=J},function(i,c){i.exports=s},function(i,c){i.exports=t},function(i,c){i.exports=r},function(i,c){i.exports=o}])})})(Fe);var mt=Fe.exports;const ht=Ye(mt),z=a=>{const x=a,{children:n,type:s="button",variant:t="primary",size:r="medium",disabled:o=!1,onClick:i,className:c=""}=x,u=we(x,["children","type","variant","size","disabled","onClick","className"]),d="btn",m=`btn-${t}`,h=`btn-${r}`,g=[d,m,h,o?"btn-disabled":"",c].filter(Boolean).join(" ");return e.jsx("button",$(I({type:s,className:g,disabled:o,onClick:i},u),{children:n}))},pt=({signature:a,onChange:n})=>{const s=f.useRef(null),t=f.useRef(null),[r,o]=f.useState(!0),[i,c]=f.useState({width:400,height:200});f.useEffect(()=>{const m=()=>{if(t.current){const h=t.current.offsetWidth-20,l=Math.max(300,Math.min(h,600));c({width:l,height:200})}};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),f.useEffect(()=>{a&&s.current&&(s.current.fromDataURL(a),o(!1))},[a]);const u=()=>{s.current&&(s.current.clear(),o(!0),n(null))},d=()=>{if(s.current){const m=s.current.isEmpty();if(o(m),m)n(null);else{const h=s.current.toDataURL();console.log("Signature captured:",h.substring(0,50)+"..."),n(h)}}};return e.jsxs("div",{className:"signature-pad",children:[e.jsxs("div",{className:"signature-canvas-container",ref:t,children:[e.jsx(ht,{ref:s,canvasProps:{width:i.width,height:i.height,className:"signature-canvas"},onEnd:d,backgroundColor:"rgba(255,255,255,1)"}),r&&e.jsx("div",{className:"signature-placeholder",children:"Sign here with your finger"})]}),e.jsxs("div",{className:"signature-actions",children:[e.jsx(z,{type:"button",variant:"secondary",size:"small",onClick:u,disabled:r,children:"Clear Signature"}),!r&&e.jsx("span",{className:"signature-status",children:"✓ Signature captured"})]})]})},gt=a=>T(A,null,function*(){return!a||a.length===0?[]:yield Promise.all(a.map(s=>T(A,null,function*(){return new Promise(t=>{const r=new FileReader;r.onload=o=>{t({name:s.name,type:s.type,size:s.size,data:o.target.result,lastModified:s.lastModified})},r.onerror=()=>{t({name:s.name,type:s.type,size:s.size,data:null,error:"Failed to read file"})},r.readAsDataURL(s)})})))}),Te=(a,n="job-orders")=>{const s=JSON.stringify(a,null,2),t=new Blob([s],{type:"application/json"});Me(t,`${n}.json`)},Ae=(a,n="job-orders")=>{if(!a||a.length===0){alert("No data to export");return}const r=[["Case Number","Customer Name","Customer Address","Customer Email","SKU","Coverage","Order Date","Dispatch Date","Dispatch Time","Complaint Details","Tested Before","Tested After","Troubles Found","Other Notes","Terms Accepted","Status","Created At","Has Signature","Media Files Count","Media File Names"].join(","),...a.map(i=>[`"${i.caseNumber||""}"`,`"${i.customerName||""}"`,`"${(i.customerAddress||"").replace(/"/g,'""')}"`,`"${i.customerEmail||""}"`,`"${i.sku||""}"`,`"${Array.isArray(i.coverage)?i.coverage.join("; "):""}"`,`"${i.orderDate||""}"`,`"${i.dispatchDate||""}"`,`"${i.dispatchTime||""}"`,`"${(i.complaintDetails||"").replace(/"/g,'""')}"`,`"${i.testedBefore?"Yes":"No"}"`,`"${i.testedAfter?"Yes":"No"}"`,`"${i.troublesFound||0}"`,`"${(i.otherNotes||"").replace(/"/g,'""')}"`,`"${i.termsAccepted?"Yes":"No"}"`,`"${i.status||""}"`,`"${i.createdAt||""}"`,`"${i.signatureData||i.signature_url?"Yes":"No"}"`,`"${i.mediaFiles?i.mediaFiles.length:i.media_urls?i.media_urls.length:0}"`,`"${i.mediaFiles?i.mediaFiles.map(c=>c.name).join("; "):i.media_urls?i.media_urls.map((c,u)=>`File ${u+1}`).join("; "):"None"}"`].join(","))].join(`
`),o=new Blob([r],{type:"text/csv;charset=utf-8;"});Me(o,`${n}.csv`)},ft=(a,n="job-orders")=>T(A,null,function*(){const s=bt(a),t=window.open("","_blank");t.document.write(s),t.document.close(),setTimeout(()=>{t.print()},500)}),xt=a=>{const n=`job-order-${a.caseNumber||"unknown"}`,s=$(I({},a),{exportedAt:new Date().toISOString(),exportType:"Individual Job Order"});Te([s],n)},Me=(a,n)=>{const s=URL.createObjectURL(a),t=document.createElement("a");t.href=s,t.download=n,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(()=>URL.revokeObjectURL(s),100)},bt=a=>`
    <!DOCTYPE html>
    <html>
    <head>
        <title>Mondo Cucina Job Orders Report</title>
        <style>
            body { 
                font-family: Arial, sans-serif; 
                margin: 0;
                padding: 20px;
                line-height: 1.4;
                color: #333;
            }
            .header { 
                text-align: center; 
                margin-bottom: 40px; 
                border-bottom: 3px solid #2c3e50;
                padding-bottom: 20px;
            }
            .header h1 {
                color: #2c3e50;
                margin-bottom: 10px;
                font-size: 28px;
            }
            .header p {
                color: #7f8c8d;
                margin: 5px 0;
                font-size: 14px;
            }
            
            /* Job Order Details - First Page */
            .job-order-details { 
                margin-bottom: 40px; 
                padding: 20px; 
                border: 2px solid #e1e5e9; 
                border-radius: 8px;
                background: #fafafa;
                page-break-after: always;
            }
            .job-order-details h3 { 
                margin-top: 0; 
                color: #2c3e50;
                border-bottom: 2px solid #3498db;
                padding-bottom: 10px;
                font-size: 20px;
            }
            .details-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
                margin-top: 20px;
            }
            .details-section {
                background: white;
                padding: 15px;
                border-radius: 6px;
                border: 1px solid #e1e5e9;
            }
            .details-section h4 {
                margin: 0 0 15px 0;
                color: #2c3e50;
                font-size: 16px;
                border-bottom: 1px solid #eee;
                padding-bottom: 5px;
            }
            .field { 
                margin: 10px 0; 
                display: flex;
                align-items: flex-start;
            }
            .field strong { 
                display: inline-block; 
                width: 140px; 
                color: #555;
                font-weight: 600;
                flex-shrink: 0;
            }
            .field-value {
                flex: 1;
                word-wrap: break-word;
            }
            .full-width {
                grid-column: 1 / -1;
            }
            
            /* Images Page - Second Page */
            .images-page {
                page-break-before: always;
                margin-top: 40px;
            }
            .images-header {
                text-align: center;
                margin-bottom: 30px;
                border-bottom: 2px solid #3498db;
                padding-bottom: 15px;
            }
            .images-header h3 {
                color: #2c3e50;
                margin: 0;
                font-size: 22px;
            }
            .media-section {
                margin-bottom: 40px;
                text-align: center;
            }
            .media-section h4 {
                color: #2c3e50;
                margin-bottom: 20px;
                font-size: 18px;
            }
            .media-files {
                display: flex;
                flex-wrap: wrap;
                gap: 30px;
                justify-content: center;
                margin-top: 20px;
                align-items: flex-start;
            }
            .media-item {
                text-align: center;
                margin: 10px;
                page-break-inside: avoid;
            }
            .media-item img {
                max-width: 450px;
                max-height: 350px;
                border: 2px solid #ddd;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                background: white;
                object-fit: contain;
            }
            .media-item .filename {
                font-size: 14px;
                color: #666;
                margin-top: 10px;
                font-weight: 500;
                word-break: break-all;
            }
            .signature-section { 
                margin-top: 50px;
                text-align: center;
                page-break-inside: avoid;
            }
            .signature-section h4 {
                color: #2c3e50;
                margin-bottom: 20px;
                font-size: 18px;
            }
            .signature-section img { 
                max-width: 600px; 
                max-height: 300px;
                border: 3px solid #2c3e50; 
                background: white;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                padding: 15px;
                object-fit: contain;
            }
            
            @media print {
                body { 
                    margin: 0; 
                    padding: 15px;
                }
                .job-order-details { 
                    page-break-after: always; 
                }
                .images-page {
                    page-break-before: always;
                }
                .media-item, .signature-section { 
                    page-break-inside: avoid; 
                }
                .details-grid {
                    grid-template-columns: 1fr;
                    gap: 15px;
                }
                .media-item img {
                    max-width: 400px;
                    max-height: 300px;
                }
                .signature-section img {
                    max-width: 500px;
                    max-height: 250px;
                }
            }
        </style>
    </head>
    <body>
        <div class="header">
            <h1>Mondo Cucina Job Orders Report</h1>
            <p>Generated on: ${new Date().toLocaleDateString()}</p>
            <p>Total Orders: ${a.length}</p>
        </div>
        
        ${a.map((s,t)=>`
            <div class="job-order">
                <h3>Job Order #${t+1} - Case: ${s.caseNumber||"N/A"}</h3>
                
                <div class="field"><strong>Customer Name:</strong> ${s.customerName||"N/A"}</div>
                <div class="field"><strong>Customer Address:</strong> ${s.customerAddress||"N/A"}</div>
                <div class="field"><strong>Customer Email:</strong> ${s.customerEmail||"N/A"}</div>
                <div class="field"><strong>SKU:</strong> ${s.sku||"N/A"}</div>
                <div class="field"><strong>Coverage:</strong> ${Array.isArray(s.coverage)?s.coverage.join(", "):"N/A"}</div>
                <div class="field"><strong>Order Date:</strong> ${s.orderDate||"N/A"}</div>
                <div class="field"><strong>Dispatch Date:</strong> ${s.dispatchDate||"N/A"}</div>
                <div class="field"><strong>Dispatch Time:</strong> ${s.dispatchTime||"N/A"}</div>
                <div class="field"><strong>Complaint:</strong> ${s.complaintDetails||"N/A"}</div>
                <div class="field"><strong>Tested Before:</strong> ${s.testedBefore?"Yes":"No"}</div>
                <div class="field"><strong>Tested After:</strong> ${s.testedAfter?"Yes":"No"}</div>
                <div class="field"><strong>Troubles Found:</strong> ${s.troublesFound||0}</div>
                <div class="field"><strong>Other Notes:</strong> ${s.otherNotes||"N/A"}</div>
                <div class="field"><strong>Status:</strong> ${s.status||"N/A"}</div>
                <div class="field"><strong>Created:</strong> ${s.createdAt||"N/A"}</div>
                
                ${s.mediaFiles&&s.mediaFiles.length>0||s.media_urls&&s.media_urls.length>0?`
                    <div class="section-divider">
                        <div class="media-section">
                            <strong>📷 Uploaded Files (${s.mediaFiles?s.mediaFiles.length:s.media_urls?s.media_urls.length:0}):</strong>
                            <div class="media-files">
                                ${(s.mediaFiles||(s.media_urls?s.media_urls.map(r=>({data:r,name:"Uploaded File",type:"image"})):[])).map((r,o)=>(r.type&&r.type.startsWith("image/")||r.name&&/\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(r.name)||r.data&&r.data.startsWith("data:image/"))&&r.data?`
                                            <div class="media-item">
                                                <img src="${r.data}" alt="Uploaded file ${o+1}" onerror="this.style.display='none';" />
                                                <div class="filename">${(r.name||`File ${o+1}`).replace(/[<>]/g,"")}</div>
                                            </div>
                                        `:`
                                            <div class="media-item">
                                                <div style="padding: 20px; border: 1px solid #ddd; border-radius: 4px; background: #f9f9f9; text-align: center;">
                                                    📄 ${(r.name||`File ${o+1}`).replace(/[<>]/g,"")}
                                                    <br><small style="color: #666;">${(r.type||"Unknown type").replace(/[<>]/g,"")}</small>
                                                    ${r.size?`<br><small style="color: #999;">${(r.size/1024).toFixed(1)} KB</small>`:""}

                                                </div>
                                            </div>
                                        `).join("")}
                            </div>
                        </div>
                    </div>
                `:""}
                
                ${s.signatureData||s.signature_url?`
                    <div class="section-divider">
                        <div class="signature">
                            <strong>✍️ Customer Signature:</strong><br><br>
                            <img src="${s.signatureData||s.signature_url}" alt="Customer Signature" />
                        </div>
                    </div>
                `:'<div class="section-divider"><div class="field"><strong>✍️ Signature:</strong> Not provided</div></div>'}
            </div>
        `).join("")}
    </body>
    </html>
    `,vt=({files:a=[],onChange:n})=>{const s=f.useRef(null),[t,r]=f.useState(!1),o=l=>T(A,null,function*(){const g=Array.from(l),x=g.filter(v=>["image/jpeg","image/jpg","image/png","image/gif","application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(v.type)&&v.size<=10*1024*1024);x.length!==g.length&&alert("Some files were rejected. Please ensure files are images, PDFs, or documents under 10MB.");const N=yield gt(x),D=[...a,...N];n(D)}),i=l=>{l.target.files.length>0&&(o(l.target.files),l.target.value="")},c=l=>{l.preventDefault(),r(!1),l.dataTransfer.files.length>0&&o(l.dataTransfer.files)},u=l=>{l.preventDefault(),r(!0)},d=l=>{l.preventDefault(),r(!1)},m=l=>{const g=a.filter((x,N)=>N!==l);n(g)},h=l=>{if(l===0)return"0 Bytes";const g=1024,x=["Bytes","KB","MB","GB"],N=Math.floor(Math.log(l)/Math.log(g));return parseFloat((l/Math.pow(g,N)).toFixed(2))+" "+x[N]};return e.jsxs("div",{className:"media-upload",children:[e.jsxs("div",{className:`upload-area ${t?"drag-over":""}`,onDrop:c,onDragOver:u,onDragLeave:d,onClick:()=>{var l;return(l=s.current)==null?void 0:l.click()},children:[e.jsxs("div",{className:"upload-content",children:[e.jsx("div",{className:"upload-icon",children:"📁"}),e.jsx("p",{children:"Click to select files or drag and drop"}),e.jsx("p",{className:"upload-hint",children:"Supported: Images, PDF, Word documents (max 10MB each)"})]}),e.jsx("input",{ref:s,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt",onChange:i,style:{display:"none"}})]}),a.length>0&&e.jsxs("div",{className:"uploaded-files",children:[e.jsxs("h4",{children:["Uploaded Files (",a.length,")"]}),e.jsx("div",{className:"file-list",children:a.map((l,g)=>{const x=l.type&&l.type.startsWith("image/")||l.name&&/\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(l.name);return e.jsxs("div",{className:"file-item",children:[x&&l.data&&e.jsx("div",{className:"file-preview",children:e.jsx("img",{src:l.data,alt:l.name,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"4px",border:"1px solid #ddd"}})}),e.jsxs("div",{className:"file-info",children:[e.jsx("div",{className:"file-name",children:l.name}),e.jsx("div",{className:"file-size",children:h(l.size)}),x&&e.jsx("div",{className:"file-type",children:"📷 Image"})]}),e.jsx(z,{type:"button",variant:"danger",size:"small",onClick:()=>m(g),children:"Remove"})]},g)})})]})]})},be=()=>{const[a,n]=f.useState(navigator.onLine);return f.useEffect(()=>{const s=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",s),window.addEventListener("offline",t),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",t)}},[]),a},jt=()=>{const a=be();return e.jsxs("div",{className:`offline-status ${a?"online":"offline"}`,children:[e.jsxs("div",{className:"status-indicator",children:[e.jsx("span",{className:`status-dot ${a?"online":"offline"}`}),e.jsx("span",{className:"status-text",children:a?"Online":"Offline"})]}),!a&&e.jsx("div",{className:"offline-message",children:"Data will sync when connection is restored"})]})},yt="MondoCucinaDB",Nt=1,Y="jobOrders";let ne=null,he=null;const Q=()=>T(A,null,function*(){return ne||(he||(he=Xe(yt,Nt,{upgrade(a){if(!a.objectStoreNames.contains(Y)){const n=a.createObjectStore(Y,{keyPath:"id",autoIncrement:!0});n.createIndex("status","status"),n.createIndex("caseNumber","caseNumber")}}})),ne=yield he,ne)}),ie=()=>{const[a,n]=f.useState(null),s=f.useRef(!1);f.useEffect(()=>{(()=>T(A,null,function*(){if(!s.current){s.current=!0;try{const u=yield Q();n(u)}catch(u){console.error("Failed to initialize database:",u)}}}))()},[]);const t=f.useCallback(c=>T(A,null,function*(){const u=a||(yield Q());if(!u)return!1;try{const d=u.transaction(Y,"readwrite");return yield d.store.put($(I({},c),{status:"pending",localId:Date.now()})),yield d.done,!0}catch(d){return console.error("Failed to save job order:",d),!1}}),[a]),r=f.useCallback(()=>T(A,null,function*(){const c=a||(yield Q());if(!c)return[];try{return yield c.getAllFromIndex(Y,"status","pending")}catch(u){return console.error("Failed to get pending job orders:",u),[]}}),[a]),o=f.useCallback(c=>T(A,null,function*(){const u=a||(yield Q());if(!u)return null;try{const d=u.transaction(Y,"readwrite"),m=d.store,l=(yield m.index("status").getAll("pending")).find(g=>g.caseNumber===c);return l&&(yield m.delete(l.id)),yield d.done,l}catch(d){return console.error("Failed to remove synced job order:",d),null}}),[a]),i=f.useCallback(c=>T(A,null,function*(){const u=a||(yield Q());if(!(!u||!c.length))try{const d=u.transaction(Y,"readwrite"),m=d.store,l=(yield m.index("status").getAll("pending")).filter(g=>c.includes(g.caseNumber)).map(g=>m.delete(g.id));yield Promise.all(l),yield d.done}catch(d){console.error("Failed to clear synced job orders:",d)}}),[a]);return{saveJobOrder:t,getPendingJobOrders:r,removeSyncedJobOrder:o,clearSyncedJobOrders:i}},wt="https://mmxoptgjgfogygnlhoan.supabase.co",_t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1teG9wdGdqZ2ZvZ3lnbmxob2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNDcxOTIsImV4cCI6MjA2ODkyMzE5Mn0.NTmzAGYe1h-EL0Z4wGD3pvmCoN3OYZNHPoqFQDmgW8I",ee=Ke(wt,_t,{auth:{persistSession:!0,autoRefreshToken:!0},db:{schema:"public"},global:{fetch:(a,n={})=>{const s=new AbortController,t=setTimeout(()=>s.abort(),5e3);return fetch(a,$(I({},n),{signal:s.signal})).finally(()=>{clearTimeout(t)})}}}),Ct=()=>{const a=Z(),{saveJobOrder:n}=ie(),s=be(),[t,r]=f.useState({caseNumber:"",orderDate:new Date().toISOString().split("T")[0],customerName:"",customerAddress:"",customerEmail:"",sku:"",coverage:[],complaintDetails:"",dispatchDate:"",dispatchTime:"",testedBefore:!1,testedAfter:!1,troublesFound:0,otherNotes:"",mediaFiles:[],signatureData:null,termsAccepted:!1}),[o,i]=f.useState(!1),[c,u]=f.useState({}),d=(l,g)=>{r(x=>$(I({},x),{[l]:g})),c[l]&&u(x=>$(I({},x),{[l]:null}))},m=()=>{const l={};return t.caseNumber.trim()||(l.caseNumber="Case number is required"),t.customerName.trim()||(l.customerName="Customer name is required"),t.customerAddress.trim()||(l.customerAddress="Customer address is required"),t.sku.trim()||(l.sku="SKU is required"),t.coverage.length===0&&(l.coverage="Coverage type is required"),t.termsAccepted||(l.termsAccepted="You must accept the terms and conditions"),t.customerEmail&&!/\S+@\S+\.\S+/.test(t.customerEmail)&&(l.customerEmail="Please enter a valid email address"),u(l),Object.keys(l).length===0},h=l=>T(A,null,function*(){if(l.preventDefault(),!m())return;i(!0);const g=t.mediaFiles;try{const x={case_number:t.caseNumber,order_date:t.orderDate,customer_name:t.customerName,customer_address:t.customerAddress,customer_email:t.customerEmail,sku:t.sku,coverage:t.coverage,complaint_details:t.complaintDetails,dispatch_date:t.dispatchDate||null,dispatch_time:t.dispatchTime||null,tested_before:t.testedBefore,tested_after:t.testedAfter,troubles_found:t.troublesFound,other_notes:t.otherNotes,media_urls:g.map(v=>v.data),signature_url:t.signatureData,terms_accepted:t.termsAccepted,status:s?"synced":"pending",created_at:new Date().toISOString()};console.log("Saving job order with signature:",t.signatureData?"YES":"NO"),console.log("Saving job order with media files:",g.length);const N="https://mmxoptgjgfogygnlhoan.supabase.co",D="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1teG9wdGdqZ2ZvZ3lnbmxob2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNDcxOTIsImV4cCI6MjA2ODkyMzE5Mn0.NTmzAGYe1h-EL0Z4wGD3pvmCoN3OYZNHPoqFQDmgW8I";if(s&&N&&D&&N!=="your-supabase-url-here"&&D!=="your-supabase-anon-key-here")try{const v=new AbortController,O=setTimeout(()=>v.abort(),8e3),{error:R}=yield ee.from("job_orders").insert([x]).select().abortSignal(v.signal);if(clearTimeout(O),R)throw R;alert("Job order submitted successfully!"),a("/admin");return}catch(v){v.name==="AbortError"?console.warn("Database request timed out - saving offline instead"):console.warn("Database error - saving offline instead:",v.message)}yield n($(I(I({},x),t),{signatureData:t.signatureData,mediaFiles:g,status:"pending",createdAt:new Date().toISOString()})),alert(s?'Database connection issue. Job order saved offline. Use "Sync to Central DB" button in Admin panel to sync.':'Job order saved offline. Use "Sync to Central DB" button in Admin panel to sync when database is ready.'),a("/admin")}catch(x){console.error("Failed to save job order:",x),alert("Failed to save job order. Please try again.")}finally{i(!1)}});return e.jsxs("div",{className:"form-dashboard",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"display-6 fw-bold text-primary mb-2",children:"Job Order Form"}),e.jsx("p",{className:"text-muted mb-0",children:"Fill out the form below to create a new job order"})]}),e.jsx(jt,{})]}),e.jsxs("form",{onSubmit:h,className:"job-order-form",children:[e.jsx(B,{title:"General Information",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"caseNumber",className:"form-label required",children:"Case Number"}),e.jsx("input",{type:"text",id:"caseNumber",className:`form-control ${c.caseNumber?"is-invalid":""}`,value:t.caseNumber,onChange:l=>d("caseNumber",l.target.value),placeholder:"Enter case number"}),c.caseNumber&&e.jsx("div",{className:"invalid-feedback",children:c.caseNumber})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"orderDate",className:"form-label required",children:"Order Date"}),e.jsx("input",{type:"date",id:"orderDate",className:"form-control",value:t.orderDate,onChange:l=>d("orderDate",l.target.value)})]})})]})}),e.jsxs(B,{title:"Customer Details",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"customerName",children:"Customer Name *"}),e.jsx("input",{type:"text",id:"customerName",value:t.customerName,onChange:l=>d("customerName",l.target.value),className:c.customerName?"error":"",placeholder:"Enter customer name"}),c.customerName&&e.jsx("span",{className:"error-text",children:c.customerName})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"customerAddress",children:"Customer Address *"}),e.jsx("textarea",{id:"customerAddress",value:t.customerAddress,onChange:l=>d("customerAddress",l.target.value),className:c.customerAddress?"error":"",placeholder:"Enter customer address",rows:"3"}),c.customerAddress&&e.jsx("span",{className:"error-text",children:c.customerAddress})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"customerEmail",children:"Customer Email"}),e.jsx("input",{type:"email",id:"customerEmail",value:t.customerEmail,onChange:l=>d("customerEmail",l.target.value),className:c.customerEmail?"error":"",placeholder:"Enter customer email (optional)"}),c.customerEmail&&e.jsx("span",{className:"error-text",children:c.customerEmail})]})]}),e.jsxs(B,{title:"Appliance Details",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"sku",children:"SKU *"}),e.jsx("input",{type:"text",id:"sku",value:t.sku,onChange:l=>d("sku",l.target.value),className:c.sku?"error":"",placeholder:"Enter appliance SKU"}),c.sku&&e.jsx("span",{className:"error-text",children:c.sku})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Coverage Type *"}),e.jsxs("div",{className:"checkbox-group",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:t.coverage.includes("EXP"),onChange:l=>{const g=l.target.checked?[...t.coverage,"EXP"]:t.coverage.filter(x=>x!=="EXP");d("coverage",g)}}),"Extended Warranty (EXP)"]}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:t.coverage.includes("WTY"),onChange:l=>{const g=l.target.checked?[...t.coverage,"WTY"]:t.coverage.filter(x=>x!=="WTY");d("coverage",g)}}),"Warranty (WTY)"]})]}),c.coverage&&e.jsx("span",{className:"error-text",children:c.coverage})]})]}),e.jsx(B,{title:"Complaint Details",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"complaintDetails",children:"Complaint Description"}),e.jsx("textarea",{id:"complaintDetails",value:t.complaintDetails,onChange:l=>d("complaintDetails",l.target.value),placeholder:"Describe the issue or complaint",rows:"4"})]})}),e.jsx(B,{title:"Dispatch Information",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"dispatchDate",children:"Dispatch Date"}),e.jsx("input",{type:"date",id:"dispatchDate",value:t.dispatchDate,onChange:l=>d("dispatchDate",l.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"dispatchTime",children:"Dispatch Time"}),e.jsx("input",{type:"time",id:"dispatchTime",value:t.dispatchTime,onChange:l=>d("dispatchTime",l.target.value)})]})]})}),e.jsxs(B,{title:"Service Findings",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:t.testedBefore,onChange:l=>d("testedBefore",l.target.checked)}),"Tested Before Service"]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:t.testedAfter,onChange:l=>d("testedAfter",l.target.checked)}),"Tested After Service"]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"troublesFound",children:"Number of Troubles Found"}),e.jsx("input",{type:"number",id:"troublesFound",min:"0",value:t.troublesFound,onChange:l=>d("troublesFound",parseInt(l.target.value)||0)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"otherNotes",children:"Additional Notes"}),e.jsx("textarea",{id:"otherNotes",value:t.otherNotes,onChange:l=>d("otherNotes",l.target.value),placeholder:"Any additional notes or observations",rows:"3"})]})]}),e.jsx(B,{title:"Photos & Documents",children:e.jsx(vt,{files:t.mediaFiles,onChange:l=>d("mediaFiles",l)})}),e.jsx(B,{title:"Customer Signature",children:e.jsx(pt,{signature:t.signatureData,onChange:l=>d("signatureData",l)})}),e.jsx(B,{title:"Terms & Conditions",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:t.termsAccepted,onChange:l=>d("termsAccepted",l.target.checked),className:c.termsAccepted?"error":""}),"I accept the terms and conditions *"]}),c.termsAccepted&&e.jsx("span",{className:"error-text",children:c.termsAccepted})]})}),e.jsx("div",{className:"d-flex justify-content-center mt-4 pt-4 border-top",children:e.jsx("button",{type:"submit",className:`btn btn-primary btn-lg ${o?"loading":""}`,disabled:o,style:{minWidth:"200px"},children:o?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-arrow-repeat spin me-2"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),"Submit Job Order"]})})})]})]})},St=()=>{const a=Z(),{getPendingJobOrders:n,clearSyncedJobOrders:s}=ie(),[t,r]=f.useState([]),[o,i]=f.useState([]),[c,u]=f.useState(!1),[d,m]=f.useState(!0),[h,l]=f.useState([]),[g,x]=f.useState(!1),[N,D]=f.useState(!1),[v,O]=f.useState(!1),[R,M]=f.useState("Initializing..."),W=f.useMemo(()=>{const p="https://mmxoptgjgfogygnlhoan.supabase.co",j="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1teG9wdGdqZ2ZvZ3lnbmxob2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNDcxOTIsImV4cCI6MjA2ODkyMzE5Mn0.NTmzAGYe1h-EL0Z4wGD3pvmCoN3OYZNHPoqFQDmgW8I";return p&&j&&p!=="your-supabase-url-here"&&j!=="your-supabase-anon-key-here"},[]);f.useEffect(()=>{G()},[]);const G=f.useCallback(()=>T(A,null,function*(){m(!0),M("Loading offline data...");try{const p=yield n();if(i(p||[]),M("Offline data loaded"),!W){console.info("Supabase not configured - working in offline mode only"),D(!0),r([]),m(!1);return}M("Connecting to database...");const j=new AbortController,_=setTimeout(()=>{j.abort(),M("Connection timeout - using offline mode")},3e3);try{const{data:E,error:C}=yield ee.from("job_orders").select("*").order("created_at",{ascending:!1}).limit(50).abortSignal(j.signal);if(clearTimeout(_),C)throw C;r(E||[]),D(!1),M("Database connected")}catch(E){clearTimeout(_),E.name==="AbortError"?(console.warn("Supabase request timed out - switching to offline mode"),M("Connection timeout - offline mode active")):(console.warn("Could not load job orders from server:",E.message),M("Database unavailable - offline mode active")),D(!0),r([])}}catch(p){console.error("Error loading data:",p),M("Error loading data"),i([]),r([])}finally{m(!1)}}),[n,W]),V=f.useCallback(()=>{u(!0),G().finally(()=>u(!1))},[G]),J=f.useCallback(()=>[...o.map(p=>$(I({},p),{type:"pending"})),...t.map(p=>$(I({},p),{type:"synced"}))],[o,t]),w=f.useMemo(()=>J(),[J]),y=f.useCallback(()=>{g?(l([]),x(!1)):(l(w.map((p,j)=>`${p.type}-${j}`)),x(!0))},[g,w]),F=f.useCallback(p=>{l(j=>{const _=j.includes(p)?j.filter(E=>E!==p):[...j,p];return x(_.length===w.length),_})},[w.length]),P=f.useCallback(()=>h.map(p=>{const[j,_]=p.split("-");return w.find((E,C)=>E.type===j&&C.toString()===_)}).filter(Boolean),[h,w]),b=f.useCallback(p=>new Date(p).toLocaleDateString(),[]),H=f.useCallback(p=>{const j={draft:"bg-secondary",pending:"bg-warning",synced:"bg-success"};return e.jsx("span",{className:`status-badge ${j[p]||"bg-secondary"}`,children:p})},[]),X=f.useCallback(p=>{const j=P();if(j.length===0){alert("Please select at least one job order to export.");return}const E=`mondo-cucina-selected-${new Date().toISOString().split("T")[0]}`;switch(p){case"excel":Ae(j,E);break;case"pdf":ft(j,E);break}},[P]),te=f.useCallback(()=>T(A,null,function*(){if(o.length===0){alert("No pending orders to sync.");return}if(!W){alert("⚠️ Supabase database is not configured. Please set up environment variables to enable sync functionality.");return}O(!0);let p=0,j=0,_=0;const E=[],C=[];try{for(let se=0;se<o.length;se+=5){const $e=o.slice(se,se+5);yield Promise.allSettled($e.map(k=>T(A,null,function*(){try{const{data:oe,error:le}=yield ee.from("job_orders").select("case_number").eq("case_number",k.caseNumber).single();if(le&&le.code!=="PGRST116")throw le;if(oe){_++,E.push(k.caseNumber),C.push(k.caseNumber),console.log(`Skipping duplicate case number: ${k.caseNumber}`);return}const Re={case_number:k.caseNumber,order_date:k.orderDate,customer_name:k.customerName,customer_address:k.customerAddress,customer_email:k.customerEmail,sku:k.sku,coverage:k.coverage,complaint_details:k.complaintDetails,dispatch_date:k.dispatchDate||null,dispatch_time:k.dispatchTime||null,tested_before:k.testedBefore,tested_after:k.testedAfter,troubles_found:k.troublesFound,other_notes:k.otherNotes,media_urls:k.mediaFiles?k.mediaFiles.map(Le=>Le.data):[],signature_url:k.signatureData,terms_accepted:k.termsAccepted,status:"synced",created_at:k.createdAt},{error:ve}=yield ee.from("job_orders").insert([Re]);if(ve)throw ve;p++,C.push(k.caseNumber)}catch(oe){console.error("Failed to sync order:",k.caseNumber,oe),j++}})))}C.length>0&&(yield s(C),console.log(`Removed ${C.length} synced orders from local storage:`,C));let q="";p>0&&(q+=`✅ Successfully synced ${p} new job order(s) to central database!`),_>0&&(q+=`
⚠️ Removed ${_} duplicate case(s) from pending: ${E.join(", ")}`),j>0&&(q+=`
❌ ${j} failed to sync due to errors.`),p===0&&_===0&&j>0?q="❌ Failed to sync any job orders. Please check your database connection.":p===0&&_>0&&(q=`ℹ️ All ${_} job orders were already synced. Removed duplicates from pending list.`),alert(q),V()}catch(L){console.error("Sync error:",L),alert("❌ Sync failed. Please check your database connection and try again.")}finally{O(!1)}}),[o,W,s,V]);return c&&d?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"50vh"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("h5",{className:"text-muted",children:"Loading Dashboard..."}),e.jsx("p",{className:"text-muted mb-0",children:R})]})}):e.jsxs("div",{className:"admin-dashboard",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"display-6 fw-bold text-primary mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-muted mb-0",children:"Manage and view all job orders"})]}),e.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>a("/form"),children:[e.jsx("i",{className:"bi bi-plus-circle me-2"}),"New Job Order"]}),e.jsxs("button",{className:"btn btn-outline-secondary",onClick:V,children:[e.jsx("i",{className:"bi bi-arrow-clockwise me-2"}),"Refresh"]}),e.jsxs("button",{className:"btn btn-outline-info",onClick:()=>a("/debug"),children:[e.jsx("i",{className:"bi bi-bug me-2"}),"Debug"]}),o.length>0&&e.jsxs("button",{className:"btn btn-success",onClick:te,disabled:v,children:[e.jsx("i",{className:`bi ${v?"bi-arrow-repeat spin":"bi-cloud-upload"} me-2`}),v?"Syncing...":`Sync (${o.length})`]})]})]}),N&&e.jsxs("div",{className:"alert alert-warning d-flex align-items-center mb-4",role:"alert",children:[e.jsx("i",{className:"bi bi-info-circle-fill me-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Database Connection:"})," Working in offline mode. Job orders are saved locally and will sync when database is configured."]})]}),(o.length>0||t.length>0)&&e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h5",{className:"card-title mb-0",children:[e.jsx("i",{className:"bi bi-download me-2"}),"Export Data"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row align-items-center mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"selectAllCheck",checked:g,onChange:y}),e.jsxs("label",{className:"form-check-label fw-bold",htmlFor:"selectAllCheck",children:["Select All (",J().length," items)"]})]})}),e.jsx("div",{className:"col-md-6 text-md-end",children:e.jsxs("span",{className:"badge bg-info fs-6",children:[h.length," selected"]})})]}),e.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[e.jsxs("button",{className:"btn btn-success",onClick:()=>X("excel"),disabled:h.length===0,children:[e.jsx("i",{className:"bi bi-file-earmark-excel me-2"}),"Excel (",h.length,")"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>X("pdf"),disabled:h.length===0,children:[e.jsx("i",{className:"bi bi-file-earmark-pdf me-2"}),"PDF (",h.length,")"]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"bi bi-lightbulb me-1"}),"Select job orders above, then choose download option"]})})]})]}),o.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsxs("h4",{className:"text-warning mb-0",children:[e.jsx("i",{className:"bi bi-clock-history me-2"}),"Pending Sync"]}),e.jsx("span",{className:"badge bg-warning text-dark ms-2",children:o.length})]}),e.jsx("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3",children:o.map((p,j)=>{const _=`pending-${j}`,E=h.includes(_);return e.jsxs("div",{className:`job-order-card pending ${E?"selected":""}`,children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{className:"card-header-left",children:[e.jsx("label",{className:"card-checkbox",children:e.jsx("input",{type:"checkbox",checked:E,onChange:()=>F(_)})}),e.jsxs("h3",{children:["Case: ",p.caseNumber]})]}),H("pending")]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",p.customerName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"SKU:"})," ",p.sku]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",b(p.createdAt)]}),p.signatureData&&e.jsxs("div",{className:"signature-preview",children:[e.jsx("p",{children:e.jsx("strong",{children:"Signature:"})}),e.jsx("img",{src:p.signatureData,alt:"Customer Signature",className:"signature-image",style:{maxWidth:"200px",maxHeight:"100px",border:"1px solid #ddd",borderRadius:"4px"}})]}),!p.signatureData&&e.jsxs("p",{children:[e.jsx("strong",{children:"Signature:"})," ",e.jsx("span",{className:"text-muted",children:"Not provided"})]}),p.mediaFiles&&p.mediaFiles.length>0&&e.jsxs("div",{className:"media-preview",children:[e.jsx("p",{children:e.jsxs("strong",{children:["Uploaded Files (",p.mediaFiles.length,"):"]})}),e.jsx("div",{className:"media-grid",children:p.mediaFiles.map((C,L)=>e.jsx("div",{className:"media-item",children:C.type&&C.type.startsWith("image/")&&C.data?e.jsx("img",{src:C.data,alt:`Uploaded file ${L+1}`,className:"media-image",style:{maxWidth:"100px",maxHeight:"100px",objectFit:"cover",borderRadius:"4px",border:"1px solid #ddd",cursor:"pointer"},onClick:()=>window.open(C.data,"_blank")}):e.jsxs("div",{className:"media-file",style:{padding:"10px",border:"1px solid #ddd",borderRadius:"4px",textAlign:"center",backgroundColor:"#f9f9f9"},children:[e.jsx("div",{className:"file-icon",children:"📄"}),e.jsx("div",{className:"file-name",style:{fontSize:"12px",marginTop:"5px"},children:C.name}),C.size&&e.jsxs("div",{className:"file-size",style:{fontSize:"11px",color:"#666"},children:[(C.size/1024).toFixed(1)," KB"]})]})},L))})]}),(!p.mediaFiles||p.mediaFiles.length===0)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Media Files:"})," ",e.jsx("span",{className:"text-muted",children:"None uploaded"})]})]})]},_)})})]}),e.jsxs("div",{className:"synced-section",children:[e.jsxs("h2",{children:["Synced Orders (",t.length,")"]}),t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("p",{children:"No job orders found."}),e.jsx(z,{variant:"primary",onClick:()=>a("/form"),children:"Create First Job Order"})]}):e.jsx("div",{className:"job-orders-grid",children:t.map((p,j)=>{const _=`synced-${j}`,E=h.includes(_);return e.jsxs("div",{className:`job-order-card ${E?"selected":""}`,children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{className:"card-header-left",children:[e.jsx("label",{className:"card-checkbox",children:e.jsx("input",{type:"checkbox",checked:E,onChange:()=>F(_)})}),e.jsxs("h3",{children:["Case: ",p.case_number]})]}),H(p.status)]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",p.customer_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"SKU:"})," ",p.sku]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",b(p.created_at)]}),p.coverage&&e.jsxs("p",{children:[e.jsx("strong",{children:"Coverage:"})," ",p.coverage.join(", ")]}),p.signature_url&&e.jsxs("div",{className:"signature-preview",children:[e.jsx("p",{children:e.jsx("strong",{children:"Signature:"})}),e.jsx("img",{src:p.signature_url,alt:"Customer Signature",className:"signature-image",style:{maxWidth:"200px",maxHeight:"100px",border:"1px solid #ddd",borderRadius:"4px"}})]}),!p.signature_url&&e.jsxs("p",{children:[e.jsx("strong",{children:"Signature:"})," ",e.jsx("span",{className:"text-muted",children:"Not provided"})]}),p.media_urls&&p.media_urls.length>0&&e.jsxs("div",{className:"media-preview",children:[e.jsx("p",{children:e.jsxs("strong",{children:["Media Files (",p.media_urls.length,"):"]})}),e.jsx("div",{className:"media-grid",children:p.media_urls.map((C,L)=>e.jsx("div",{className:"media-item",children:e.jsx("img",{src:C,alt:`Media file ${L+1}`,className:"media-image",onClick:()=>window.open(C,"_blank")})},L))})]}),(!p.media_urls||p.media_urls.length===0)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Media Files:"})," ",e.jsx("span",{className:"text-muted",children:"None uploaded"})]})]})]},p.id)})})]})]})},Ie=({customPath:a,customLabel:n})=>{const s=Z(),t=fe(),r=()=>{if(a)s(a);else switch(t.pathname){case"/form":s("/admin");break;case"/debug":s("/admin");break;case"/login":s("/admin");break;case"/admin":s("/form");break;default:s(-1)}},o=()=>{if(n)return n;switch(t.pathname){case"/form":return"← Back to Dashboard";case"/debug":return"← Back to Dashboard";case"/login":return"← Back to Dashboard";case"/admin":return"← Back to Form";default:return"← Back"}};return e.jsx(z,{variant:"outline",size:"small",onClick:r,className:"back-button",children:o()})},Dt=()=>{const a=Z(),[n,s]=f.useState({email:"",password:""}),[t,r]=f.useState(!1),[o,i]=f.useState(""),c=(d,m)=>{s(h=>$(I({},h),{[d]:m})),o&&i("")},u=d=>T(A,null,function*(){d.preventDefault(),r(!0),i("");try{const{data:m,error:h}=yield ee.auth.signInWithPassword({email:n.email,password:n.password});if(h)throw h;a("/admin")}catch(m){console.error("Login error:",m),i(m.message||"Login failed. Please try again.")}finally{r(!1)}});return e.jsx("div",{className:"login-page",children:e.jsxs("div",{className:"login-container",children:[e.jsx("div",{className:"login-back-button",children:e.jsx(Ie,{customPath:"/admin",customLabel:"← Back to Dashboard"})}),e.jsxs("div",{className:"login-header",children:[e.jsx("h1",{children:"Mondo Cucina"}),e.jsx("p",{children:"Job Order System"})]}),e.jsxs("form",{onSubmit:u,className:"login-form",children:[o&&e.jsx("div",{className:"error-message",children:o}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:n.email,onChange:d=>c("email",d.target.value),placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:n.password,onChange:d=>c("password",d.target.value),placeholder:"Enter your password",required:!0})]}),e.jsx(z,{type:"submit",variant:"primary",disabled:t,className:"login-btn",children:t?"Signing In...":"Sign In"})]}),e.jsx("div",{className:"login-footer",children:e.jsx("p",{children:e.jsx(z,{variant:"outline",onClick:()=>a("/form"),children:"Continue as Guest"})})})]})})},kt=()=>{const a=Z(),n=fe(),[s,t]=f.useState(!1),r=[{path:"/form",label:"📝 New Job Order",icon:"📝"},{path:"/admin",label:"📊 Dashboard",icon:"📊"},{path:"/debug",label:"🔧 Debug Data",icon:"🔧"},{path:"/login",label:"🔐 Login",icon:"🔐"}],o=r.find(i=>i.path===n.pathname);return e.jsxs("div",{className:"quick-nav",children:[e.jsxs(z,{variant:"outline",size:"small",onClick:()=>t(!s),className:"nav-toggle",children:["🧭 Menu ",s?"▲":"▼"]}),s&&e.jsxs("div",{className:"nav-dropdown",children:[e.jsx("div",{className:"nav-current",children:e.jsxs("small",{children:["Current: ",(o==null?void 0:o.label)||"Unknown"]})}),e.jsx("div",{className:"nav-items",children:r.filter(i=>i.path!==n.pathname).map(i=>e.jsxs("button",{className:"nav-item",onClick:()=>{a(i.path),t(!1)},children:[e.jsx("span",{className:"nav-icon",children:i.icon}),e.jsx("span",{className:"nav-label",children:i.label.replace(i.icon+" ","")})]},i.path))})]})]})},Pt=({title:a,subtitle:n,showBackButton:s=!0,backPath:t,backLabel:r,rightContent:o,className:i=""})=>e.jsxs("div",{className:`page-header ${i}`,children:[e.jsxs("div",{className:"page-header-left",children:[s&&e.jsx(Ie,{customPath:t,customLabel:r}),e.jsxs("div",{className:"page-title-section",children:[e.jsx("h1",{className:"page-title",children:a}),n&&e.jsx("p",{className:"page-subtitle",children:n})]})]}),e.jsxs("div",{className:"page-header-right",children:[e.jsx(kt,{}),o&&o]})]}),Et=()=>{const{getPendingJobOrders:a}=ie(),[n,s]=f.useState([]),[t,r]=f.useState(!0);f.useEffect(()=>{o()},[]);const o=()=>T(A,null,function*(){r(!0);try{const c=yield a();s(c||[])}catch(c){console.error("Error loading stored data:",c)}finally{r(!1)}}),i=()=>T(A,null,function*(){if(confirm("Are you sure you want to clear all offline data?"))try{const c=yield indexedDB.databases();yield Promise.all(c.map(u=>{if(u.name==="MondoCucinaDB")return new Promise((d,m)=>{const h=indexedDB.deleteDatabase(u.name);h.onsuccess=()=>d(),h.onerror=()=>m(h.error)})})),alert("All offline data cleared!"),s([])}catch(c){console.error("Error clearing data:",c),alert("Error clearing data")}});return t?e.jsx("div",{className:"debug-page",children:e.jsx("h1",{children:"Loading stored data..."})}):e.jsxs("div",{className:"debug-page",style:{padding:"20px",fontFamily:"monospace"},children:[e.jsx(Pt,{title:"Debug: Stored Data",subtitle:`Found ${n.length} stored form(s)`,backPath:"/admin",backLabel:"← Back to Dashboard",rightContent:e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[e.jsx(z,{onClick:o,variant:"secondary",size:"small",children:"Refresh Data"}),e.jsx(z,{onClick:i,variant:"danger",size:"small",children:"Clear All Data"}),n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(z,{onClick:()=>Te(n,"offline-job-orders"),variant:"outline",size:"small",children:"📄 Export JSON"}),e.jsx(z,{onClick:()=>Ae(n,"offline-job-orders"),variant:"outline",size:"small",children:"📊 Export CSV"})]})]})}),n.length===0?e.jsx("p",{children:"No offline data found."}):n.map((c,u)=>{var d;return e.jsxs("div",{style:{border:"1px solid #ccc",margin:"10px 0",padding:"15px",backgroundColor:"#f9f9f9",borderRadius:"5px"},children:[e.jsxs("h3",{children:["Form #",u+1]}),e.jsxs("div",{style:{fontSize:"12px",lineHeight:"1.4"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Case Number:"})," ",c.caseNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",c.customerName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"SKU:"})," ",c.sku]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date Created:"})," ",c.createdAt]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",c.status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Signature:"})," ",c.signatureData?"YES ✓":"NO ✗"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Media Files:"})," ",((d=c.mediaFiles)==null?void 0:d.length)||0]}),c.signatureData&&e.jsxs("div",{style:{marginTop:"10px"},children:[e.jsx("p",{children:e.jsx("strong",{children:"Signature Preview:"})}),e.jsx("img",{src:c.signatureData,alt:"Signature",style:{maxWidth:"200px",border:"1px solid #ddd",backgroundColor:"white"}})]}),e.jsx("div",{style:{marginTop:"10px"},children:e.jsx(z,{onClick:()=>xt(c),variant:"outline",size:"small",children:"📥 Export This Form"})}),e.jsxs("details",{style:{marginTop:"10px"},children:[e.jsx("summary",{children:"View Raw Data"}),e.jsx("pre",{style:{fontSize:"10px",overflow:"auto",backgroundColor:"#fff",padding:"10px",border:"1px solid #ddd",marginTop:"5px"},children:JSON.stringify(c,null,2)})]})]})]},u)})]})},Ot=({isCollapsed:a,onToggle:n})=>{const s=Z(),t=fe(),{getPendingJobOrders:r}=ie(),o=be(),[i,c]=f.useState(0);f.useEffect(()=>{const h=()=>T(A,null,function*(){try{const g=yield r();c((g==null?void 0:g.length)||0)}catch(g){console.error("Error loading pending count:",g)}});h();const l=setInterval(h,3e4);return()=>clearInterval(l)},[r]);const u=[{path:"/admin",icon:"bi-speedometer2",label:"Dashboard",description:"View all job orders"},{path:"/form",icon:"bi-file-earmark-plus",label:"New Job Order",description:"Create new job order"},{path:"/debug",icon:"bi-bug",label:"Debug Data",description:"Debug information"}],d=h=>t.pathname===h,m=h=>{s(h),window.innerWidth<768&&setTimeout(()=>n(),150)};return e.jsxs(e.Fragment,{children:[!a&&window.innerWidth<768&&e.jsx("div",{className:"sidebar-overlay",onClick:n}),e.jsxs("div",{className:`sidebar ${a?"collapsed":""}`,onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsxs("div",{className:"brand-container",children:[e.jsx("div",{className:"brand-icon",children:e.jsx("i",{className:"bi bi-building"})}),!a&&e.jsxs("div",{className:"brand-text",children:[e.jsx("h5",{className:"brand-title",children:"Mondo Cucina"}),e.jsx("small",{className:"brand-subtitle",children:"Job Management"})]})]}),window.innerWidth<768&&e.jsx("button",{className:"sidebar-toggle",onClick:n,"aria-label":"Toggle Sidebar",children:e.jsx("i",{className:"bi bi-x-lg"})})]}),e.jsxs("div",{className:"connection-status",children:[e.jsxs("div",{className:`status-indicator ${o?"online":"offline"}`,children:[e.jsx("i",{className:`bi ${o?"bi-wifi":"bi-wifi-off"}`}),!a&&e.jsx("span",{className:"status-text",children:o?"Online":"Offline"})]}),i>0&&!a&&e.jsxs("div",{className:"pending-indicator",children:[e.jsx("i",{className:"bi bi-clock-history"}),e.jsxs("span",{children:[i," pending sync"]})]})]}),e.jsx("nav",{className:"sidebar-nav",children:e.jsx("ul",{className:"nav-list",children:u.map(h=>{const l=d(h.path);return e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${l?"active":""}`,onClick:()=>m(h.path),title:a?h.label:h.description,children:[e.jsx("div",{className:"nav-icon",children:e.jsx("i",{className:h.icon})}),!a&&e.jsxs("div",{className:"nav-content",children:[e.jsx("span",{className:"nav-label",children:h.label}),e.jsx("small",{className:"nav-description",children:h.description})]}),h.path==="/admin"&&i>0&&e.jsx("span",{className:"badge bg-warning rounded-pill",children:i})]})},h.path)})})}),e.jsx("div",{className:"sidebar-footer",children:!a&&e.jsx("div",{className:"footer-content",children:e.jsx("small",{className:"text-muted",children:"Version 1.0.0"})})})]})]})},Ft=({enabled:a=!1})=>{const[n,s]=f.useState({pageLoad:null,domContentLoaded:null,firstPaint:null,firstContentfulPaint:null,largestContentfulPaint:null});if(f.useEffect(()=>{if(!a)return;const o=()=>{const i=performance.getEntriesByType("navigation")[0];i&&s(m=>$(I({},m),{pageLoad:Math.round(i.loadEventEnd-i.fetchStart),domContentLoaded:Math.round(i.domContentLoadedEventEnd-i.fetchStart)}));const c=performance.getEntriesByType("paint"),u=c.find(m=>m.name==="first-paint"),d=c.find(m=>m.name==="first-contentful-paint");if(u&&s(m=>$(I({},m),{firstPaint:Math.round(u.startTime)})),d&&s(m=>$(I({},m),{firstContentfulPaint:Math.round(d.startTime)})),"PerformanceObserver"in window){const m=new PerformanceObserver(h=>{const l=h.getEntries(),g=l[l.length-1];s(x=>$(I({},x),{largestContentfulPaint:Math.round(g.startTime)}))});return m.observe({entryTypes:["largest-contentful-paint"]}),()=>m.disconnect()}};if(document.readyState==="complete")o();else return window.addEventListener("load",o),()=>window.removeEventListener("load",o)},[a]),!a||!n.pageLoad)return null;const t=(o,i)=>o<=i.good?"success":o<=i.fair?"warning":"danger",r={pageLoad:{good:2e3,fair:4e3},firstContentfulPaint:{good:1e3,fair:2500},largestContentfulPaint:{good:2500,fair:4e3}};return e.jsx("div",{className:"performance-monitor position-fixed bottom-0 end-0 m-3",style:{zIndex:1050},children:e.jsxs("div",{className:"card shadow-sm",style:{width:"280px",fontSize:"0.8rem"},children:[e.jsx("div",{className:"card-header bg-dark text-white py-2",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"bi bi-speedometer2 me-2"}),"Performance Metrics"]})}),e.jsxs("div",{className:"card-body p-2",children:[e.jsxs("div",{className:"row g-1",children:[n.pageLoad&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:"Page Load"}),e.jsxs("span",{className:`badge bg-${t(n.pageLoad,r.pageLoad)}`,children:[n.pageLoad,"ms"]})]})}),n.domContentLoaded&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:"DOM Ready"}),e.jsxs("span",{className:"badge bg-info",children:[n.domContentLoaded,"ms"]})]})}),n.firstContentfulPaint&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:"First Paint"}),e.jsxs("span",{className:`badge bg-${t(n.firstContentfulPaint,r.firstContentfulPaint)}`,children:[n.firstContentfulPaint,"ms"]})]})}),n.largestContentfulPaint&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:"LCP"}),e.jsxs("span",{className:`badge bg-${t(n.largestContentfulPaint,r.largestContentfulPaint)}`,children:[n.largestContentfulPaint,"ms"]})]})})]}),e.jsx("div",{className:"mt-2 pt-2 border-top",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("small",{className:"text-muted",children:"Memory:"}),e.jsx("small",{className:"text-muted",children:performance.memory?`${Math.round(performance.memory.usedJSHeapSize/1024/1024)}MB`:"N/A"})]})})]})]})})},pe=({children:a})=>{const[n,s]=f.useState(!1),[t,r]=f.useState(!1);f.useEffect(()=>{const c=()=>{const u=window.innerWidth<768;r(u),u&&s(!0)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const o=()=>{s(!n)},i=()=>{t&&!n&&s(!0)};return e.jsxs("div",{className:"dashboard-layout",children:[e.jsx(Ot,{isCollapsed:n,onToggle:o}),e.jsxs("main",{className:`main-content ${n?"sidebar-collapsed":""}`,onClick:i,children:[t&&e.jsxs("div",{className:"mobile-header",children:[e.jsx("button",{className:"btn btn-primary mobile-menu-toggle",onClick:c=>{c.stopPropagation(),o()},"aria-label":n?"Open Menu":"Close Menu",children:e.jsx("i",{className:`bi ${n?"bi-list":"bi-x-lg"}`})}),e.jsx("h6",{className:"mobile-title mb-0",children:"Mondo Cucina"}),t&&e.jsx("div",{className:"mobile-status",children:e.jsx("small",{className:"text-muted",children:n?"Tap menu to navigate":"Tap outside to close"})})]}),!t&&e.jsx("div",{className:"desktop-toggle",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm sidebar-toggle-btn",onClick:o,title:n?"Expand Sidebar":"Collapse Sidebar",children:e.jsx("i",{className:`bi ${n?"bi-chevron-right":"bi-chevron-left"}`})})}),e.jsx("div",{className:"content-wrapper",onClick:c=>c.stopPropagation(),children:a}),e.jsx(Ft,{enabled:!1})]})]})},Tt=()=>{const[a,n]=f.useState(!1),[s,t]=f.useState(null);f.useEffect(()=>{const i=c=>{c.preventDefault(),t(c),n(!0)};return window.addEventListener("beforeinstallprompt",i),()=>{window.removeEventListener("beforeinstallprompt",i)}},[]);const r=()=>T(A,null,function*(){if(!s)return;s.prompt();const{outcome:i}=yield s.userChoice;console.log(`User response to the install prompt: ${i}`),t(null),n(!1)}),o=()=>{n(!1),t(null)};return a?e.jsx("div",{className:"pwa-install-prompt",children:e.jsxs("div",{className:"pwa-install-content",children:[e.jsx("div",{className:"pwa-install-icon",children:e.jsx("i",{className:"fas fa-download"})}),e.jsxs("div",{className:"pwa-install-text",children:[e.jsx("h3",{children:"Install Mondo Cucina App"}),e.jsx("p",{children:"Add to your home screen for better experience"})]}),e.jsxs("div",{className:"pwa-install-buttons",children:[e.jsx("button",{className:"btn btn-secondary",onClick:o,children:"Not Now"}),e.jsx("button",{className:"btn btn-primary",onClick:r,children:"Install"})]})]})}):null};function At(){return e.jsx(Ze,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsxs("div",{className:"app",children:[e.jsx(Tt,{}),e.jsxs(Ge,{children:[e.jsx(K,{path:"/login",element:e.jsx(Dt,{})}),e.jsx(K,{path:"/",element:e.jsx(Ve,{to:"/admin",replace:!0})}),e.jsx(K,{path:"/admin",element:e.jsx(pe,{children:e.jsx(St,{})})}),e.jsx(K,{path:"/form",element:e.jsx(pe,{children:e.jsx(Ct,{})})}),e.jsx(K,{path:"/debug",element:e.jsx(pe,{children:e.jsx(Et,{})})})]})]})})}ge.createRoot(document.getElementById("root")).render(e.jsx(He.StrictMode,{children:e.jsx(At,{})}))});export default Mt();
